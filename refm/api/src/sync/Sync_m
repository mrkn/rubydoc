= module Sync_m

スレッド同期機構である再入可能な reader/writer ロック機能を Mix-in により提供する。

includeしたクラスではinitializeでsuperを呼び出しておく必要がある。
(((<ruby 1.7 feature>)))

#@# == ロック状態
== Constants
--- Sync_m::UN
#@todo
ロックされていない状態。

--- Sync_m::EX
#@todo
排他ロック。
オブジェクトの状態を更新する場合のように、
1つのスレッドがオブジェクトを独占的に使用したい場合に用いる。
排他ロック中に他のスレッドはオブジェクトを共有/排他ロックできない。

--- Sync_m::SH
#@todo
共有ロック。
複数のスレッドが同時にオブジェクトを使用できる場合に用いる。
複数のスレッドが共有ロックしている場合、
どのスレッドもオブジェクトを排他ロックできない。

== Module Functions
--- sync_mode -> bool
#@todo
現在のロック状態を返す。

--- sync_locked? -> bool
--- locked? -> bool
#@todo
ロックされているかどうかを返す。

--- sync_shared? -> bool
--- shared? -> bool
#@todo
共有ロックされているかどうかを返す。

--- sync_exclusive? -> bool
--- exclusive? -> bool
#@todo
排他ロックされているかどうかを返す。

--- sync_try_lock(mode = EX) -> bool
--- try_lock(mode = EX) -> bool
#@todo
ロック状態を変更する。
変更できたかどうかをtrueかfalseで返し、ブロックしない。

--- sync_lock(mode = EX) -> self
--- lock(mode = EX) -> self
#@todo
ロック状態を変更する。
変更できるまで現在のスレッドの実行をブロックする。

--- sync_unlock(mode = EX) -> self
--- unlock(mode = EX) -> self
#@todo
ロックを解除する。

--- sync_synchronize(mode = EX) {...} -> object
--- synchronize(mode = EX) {...} -> object
#@todo
ロック状態を変更してブロックを実行する。
ブロックの実行結果を返します。
