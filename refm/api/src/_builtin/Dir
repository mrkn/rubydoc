= class Dir < Object
include Enumerable

ディレクトリ内の要素を順に返すディレクトリストリーム操作のためのクラス。

== Class Methods
           
--- [](*pattern)                        -> [String]
#@if(version >= "1.8.0")
--- glob(pattern, flags = 0)                -> [String]
--- glob(pattern, flags = 0) {|file| ...}   -> nil
#@else
--- glob(pattern)                       -> [String]
--- glob(pattern) {|file| ...}          -> nil
#@end
#@todo

ワイルドカードの展開を行った結果を文字列の配列として返します。
パターンにマッチするファイルがない場合は空の配列を返します。

  p Dir.glob("./b*")
  => ["./bar", "./baz"]

ブロックが与えられたときはワイルドカードにマッチしたファイルを
引数にそのブロックを 1 つずつ評価して nil を返します

  Dir.glob("b*") {|f| p f }
  => "bar"
  "baz"

パターンを "\0" で区切って 1 度に複数のパターンを指定することもで
きます。

  p Dir.glob("f*\0b*")
  => ["foo", "bar"]

ワイルドカードには以下のものがあります。これらはバックスラッシュに
よりエスケープすることができます。ダブルクォートの文字列中では 2
重にエスケープする必要があることに注意してください。

: *
    空文字列を含む任意の文字列と一致します。
: ?
    任意の一文字と一致します。
: [ ]
    鈎括弧内のいずれかの文字と一致します。- でつな
    がれた文字は範囲を表します。鈎括弧の中の最初の文字が
    ^ である時には含まれない文字と一致します。
    ^ の代わりに ksh や POSIX shell のように ! も同じ意
    味で使えます。
: { }
    コンマで区切られた文字列の組合せに展開します。例えば、
    foo{a,b,c} は fooa, foob, fooc 
    に展開されそれぞれに対してマッチ判定を行います。

    括弧は入れ子にすることができます。例えば、
    {foo,bar{foo,bar}} は foo, barfoo, barbar
    のそれぞれにマッチします。
: **/
    ワイルドカード */ の0回以上の繰り返しを意味し、
    ディレクトリを再帰的にたどってマッチを行います。
    例えば,
    foo/**/bar は foo/bar, foo/*/bar,
    foo/*/*/bar ... (以下無限に続く)に対してそれぞれ
    マッチ判定を行います。
//emlist{
  Dir.glob("*")        #=> ["foo", "bar"]
  Dir.glob("fo?")      #=> ["foo"]
  Dir.glob("[^f]*")    #=> ["bar"]
  Dir.glob("{b,f}*")   #=> ["bar", "foo"]
//}
#@since 1.6.0
ruby 1.6 では、"\0" 以外に、空白類(スペース、タブ、改行)でパターン
を複数指定できましたが、空白を含むファイル名のマッチングのために
ruby 1.7 よりパターンの区切りは "\0" のみとなりました。
#@end

#@since 1.9.0
ruby 1.9 では、"\0" 以外に、Dir.glob の第一引数に配列を指定するこ
とで複数のパターンを指定できます。Dir[] の場合は、複数の引数で複数
のパターンを指定できます。
    p Dir.glob(["f*", "b*"]) # => ["foo", "bar"]
    p Dir["f*", "b*"]        # => ["foo", "bar"]
#@end

#@since 1.8.0
省略可能な第二引数には [[m:File.fnmatch]] に指定できるフラグ
と同様のフラグを指定できます。このフラグを指定することでマッチの挙
動を変更することができます。
#@end
  Dir.glob("*", File::FNM_DOTMATCH)  #=> [".", "..", "bar", "foo"]

--- chdir           -> 0
--- chdir(path)     -> 0
#@since 1.8.0
--- chdir {|path| ... }          -> object
--- chdir(path) {|path| ... }    -> object
#@end
#@todo
カレントディレクトリを path に変更します。
path を省略した場合、環境変数 HOME または LOGDIR
が設定されていればそのディレクトリに移動します。

カレントディレクトリの変更に成功すれば 0 を返します。

#@since 1.8.0
ブロックが指定された場合、カレントディレクトリの変更はブロックの実行中に限
られます。これは以下と等価です。

  savedir = Dir.pwd
  Dir.chdir(newdir)
  begin
    ...
  ensure
    Dir.chdir(savedir)
  end

ブロックが指定されたときのこのメソッドの戻り値はブロックの実行結果
です。
#@end

@param path ディレクトリのパスを文字列で指定します。

@raise Errno::EXXX 失敗した場合に発生します。

--- chroot(path)    -> 0
#@todo

ルートディレクトリを path に変更します。
[[man:chroot(2)]] を参照のこと。スーパーユーザだけがルー
トディレクトリを変更できます。

#@#元のルートディレクトリに戻る方法はありません。

ルートディレクトリの変更に成功すれば 0 を返します。

@param path ディレクトリのパスを文字列で指定します。

@raise Errno::EXXX 失敗した場合に発生します。

--- delete(path)    -> 0
--- rmdir(path)     -> 0
--- unlink(path)    -> 0
#@todo

ディレクトリを削除します。ディレクトリは空でなければいけませ
ん。

ディレクトリの削除に成功すれば 0 を返します。

@param path ディレクトリのパスを文字列で指定します。

@raise Errno::EXXX 失敗した場合に発生します。

--- entries(path)    -> [String]
#@todo

ディレクトリ path に含まれるファイルエントリ名の
配列を返します。

  Dir.entries('.') #=> [".", "..", "bar", "foo"]

@param path ディレクトリのパスを文字列で指定します。

@raise Errno::EXXX 失敗した場合に発生します。

--- foreach(path) {|file| ...}    -> nil
#@todo

ディレクトリ path の各エントリを表す文字列を引数として、ブロックを評価します。

@param path ディレクトリのパスを文字列で指定します。

@raise Errno::EXXX 失敗した場合に発生します。

--- getwd    -> String
--- pwd      -> String
#@todo

カレントディレクトリのフルパスを返します。

@raise Errno::EXXX カレントディレクトリの取得に失敗した場合に発生します(が、普通は失敗することはありません)。

#@since 1.9.0
--- inspect    -> String
#@todo
#@end

--- mkdir(path, mode = 0777)    -> 0
#@todo

path という新しいディレクトリを作ります。パーミッションは
mode で指定された値に umask をかけた値 (mode & ~umask) になります。
[[man:mkdir(2)]] も参照して下さい。

ディレクトリの作成に成功すれば 0 を返します。

@param path ディレクトリのパスを文字列で指定します。

@param mode ディレクトリのモードを整数で与えます。

@raise Errno::EXXX ディレクトリの作成に失敗した場合に発生します。

--- new(path)               -> Dir
--- open(path)              -> Dir
#@if (version >= "1.8.0")
--- open(path) {|dir| ...}  -> object
#@else
--- open(path) {|dir| ...}  -> nil
#@end
#@todo
pathに対するディレクトリストリームをオープンして返します。

#@# open() はブロックを指定することができます。
ブロックを指定して呼び出した場合は、ディレクトリストリームを
引数としてブロックを実行します。ブロックの実行が終了すると、
ディレクトリは自動的にクローズされます。
#@since 1.8.0
ブロックの実行結果を返します。
#@end

@param path ディレクトリのパスを文字列で指定します。

@raise Errno::EXXX オープンに失敗した場合に発生します。

== Instance Methods

--- close    -> nil
#@todo

ディレクトリストリームをクローズします。以降のディレクトリに
対する操作は例外 [[c:IOError]] を発生させます。

クローズに成功すれば nil を返します。

@raise IOError close に失敗した場合に発生します。

--- each {|item| ... }    -> self
#@todo
ディレクトリの各エントリを表す文字列を引数として、ブロックを評価します。

  Dir.open('.').each{|f|
    p f
  }
  #=> 
  "."
  ".."
  "bar"
  "foo"

#@since 1.8.0
--- path    -> String
#@todo

オープンしているディレクトリのパス名を文字列で返します。
#@end

--- pos     -> Integer
--- tell    -> Integer
#@todo

ディレクトリストリームの現在の位置を整数で返します。

例:

  Dir.open("/tmp") {|d|
    d.each {|f|
      p d.pos
    }
  }

--- pos=(pos)
--- seek(pos)    -> self
#@todo

ディレクトリストリームの読み込み位置を pos に移動させます。
pos は [[m:Dir#tell]] で与えられた値でなければなりま
せん。

pos= は右辺を返します。seek は self を返します。

@param pos 変更したい位置を整数で与えます。

--- read    -> String | nil
#@todo

ディレクトリストリームから次の要素を読み出して返します。最後の要素
まで読み出していれば nil を返します。

@raise Errno::EXXX ディレクトリの読み出しに失敗した場合に発生します。

--- rewind    -> self
#@todo

ディレクトリストリームの読み込み位置を先頭に移動させます。
